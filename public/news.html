<!-- Referenced: https://www.w3schools.com/html/html_responsive.asp-->
<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://kit.fontawesome.com/1301d25161.js" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" rel="stylesheet" />
<style>
    .icon-size-25{
        font-size: 25px;
        font-variation-settings: 'OPSZ' 25;
    }
</style>
<link rel="stylesheet" type="text/css" href="/css/styles.css">
</head>

<!-- you can also specify styles straight in html! Let's use Verdana on this page.-->

<body style="font-family:Verdana;">
    <nav class = "navbar navbar-expand-lg navbar-light bg-light fixed-top py-2">
        <div class="navbar-header input-group">
            <span class="input-group-text border-0" id="search-addon">
                <!--i class="fa-solid fa-binoculars fa-2xl"></i-->
                <i class="fas fa-search fa-2xl"></i>
            </span>
            <input type="search" class="form-control border-0 rounded-0" placeholder="" aria-label="Search">
        </div>
    </nav>

    <div class="row">
      <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-bottom">
          <div class="col d-flex justify-content-center">
              <a href="/">Home</a>

          </div>
          <div class="col d-flex justify-content-center border-start" style="background-color:#cfcfcf">
              <a href="/news">News</a>
              <p>
          </div>
          <div class="col d-flex justify-content-center border-start">
              <a href="/candidates.html">Candidates</a>
          </div>
          <div class="col d-flex justify-content-center border-start">
              <a href="/front_page.html">Community</a>
          </div>
      </nav>
    </div>
    <div class="container">
       <br><br><br>
       <!--classes: news-box, news-img, news-text -->
        <div id="accordion">
            <div class= "news-box card bg-light">
                <div class="row" data-bs-toggle="collapse" href="#collapse1">
                    <div class="col-4 ms-1 d-flex justify-content-center">
                        <img
                            src="https://ca-times.brightspotcdn.com/dims4/default/4f8e372/2147483647/strip/true/crop/4000x2667+0+23/resize/2400x1600!/format/webp/quality/90/?url=https%3A%2F%2Fcalifornia-times-brightspot.s3.amazonaws.com%2F0a%2Fbd%2F48221b6d4c359df22dd845ea1d9c%2Fla-photos-1staff-840357-la-me-election-day-features-10-als.jpg"
                            class="img-thumbnail my-2 mx-2 border-0 news-img card-img"
                            style="object-fit: cover;"
                        >
                    </div>
                    <div class="col news-text">
                        <h1 class="card-title mt-1">House District 22: California Special Election</h1>
                        <div class="row">
                          <div class="col-4">
                            <div class ="row">
                              <div class="col-2">
                                <span class="material-symbols-outlined icon-size-25 text-secondary"> visibility </span>
                              </div>
                              <div class="col view-counter">
                                1000
                              </div>
                            </div>
                            <div class ="row">
                              <div class="col-2">
                                <span class="material-symbols-outlined icon-size-25 text-secondary"> edit_calendar </span>
                              </div>
                              <div class="col">
                                2022-08-08
                              </div>
                            </div>
                            <div class ="row">
                              <div class="col-2">
                                <span class="material-symbols-outlined icon-size-25 text-secondary"> feed </span>
                              </div>
                              <div class="col">
                                6
                              </div>
                            </div>
                          </div>
                          <div class="col">
                            <div class="row">
                              <div class="col-1">
                                <span class="material-symbols-outlined icon-size-35 text-secondary"> sell </span>
                              </div>
                              <div class="col">
                                <div class="tag-bubble">Election</div>
                                <div class="tag-bubble">California</div>
                              </div>
                            </div>
                          </div>
                        </div>

                    </div>
                </div>
                <div id="collapse1" class="collapse bg-secondary" data-bs-parent="#accordion">
                    <div class="card-body">
                    <p class="text-light"><a href="https://www.latimes.com/politics/story/2022-05-09/california-2022-primary-election-heres-what-to-know" class="text-light"  target="_blank">LA Times:</a> What’s on the ballot in California’s 2022 primary election?</p>
                    <p class="text-light"><a href="https://www.cnn.com/election/2022/results/california/special-election/us-house-district-22" class="text-light"  target="_blank">CNN:</a> House District 22: California Special Election Results</p>
                    <p class="text-light"><a href="https://ballotpedia.org/California%27s_22nd_Congressional_District_special_election,_2022" class="text-light"  target="_blank">ballotpedia:</a> BallotPedia: California’s 22nd Congressional District special election, 2022</p>
                    <p class="text-light"><a href="https://californiaglobe.com/articles/former-assembly-leader-connie-conway-dwr-manager-lourin-hubbard-to-faceoff-in-race-for-22nd-congressional-seat/" class="text-light"  target="_blank">CaliforniaGlobe:</a>Former Assembly Leader Connie Conway, DWR Manager Lourin Hubbard To Faceoff in Race For 22nd Congressional Seat</p>
                    <p class="text-light"><a href="https://www.washingtonpost.com/elections/2022/04/05/california-house-election/" class="text-light"  target="_blank">Washington Post:</a> June runoff set for House seat in California once held by Devin Nunes</p>
                    <p class="text-light"><a href="https://www.usnews.com/news/best-states/california/articles/2022-04-08/democrat-lourin-hubbard-advances-to-runoff-election-in-californias-22nd-congressional-district" class="text-light"  target="_blank">US News:</a> Democrat Lourin Hubbard Advances to Runoff Election in California's 22nd Congressional District</p>

                    </div>
                </div>
            </div>
        </div>

        <br><br><br>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/vendors/jquery/jquery-3.3.1.min.js"></script>
    <script src="/vendors/jquery-ui/jquery-ui.min.js"></script>
    <script>

    var api = "https://newsapi.org/v2/everything?q=election&apiKey=cdb5f20071e34ea9bc4060329481ad0a";

    $.get( api, function( data ) {
      //maybe add something to add like 20 more or something?
      for(var i = 0; i < 9; i++)
        {
          card_num = i+2
          card_num_str = String(card_num)
          article = data.articles[i]
          date = article["publishedAt"].split("T")[0]
          source_name = article["source"]["name"]
          title = article["title"]
          url = article["url"]
          img = article["urlToImage"]

          console.log(card_num, card_num_str, date, source_name, title, url, img)
          new_card = "<div class= 'news-box card bg-light mt-2'>"
            + "<div class='row' data-bs-toggle='collapse' href='#collapse"+card_num_str+"''>"
              + "<div class='col-4 ms-1 d-flex justify-content-center'>"
                  + "<img "
                        +"src='" + img
                        + "' class='img-thumbnail my-2 mx-2 border-0 news-img card-img' style='object-fit: cover;'>"
                + "</div>"
                + "<div class='col news-text'>"
                    + "<h1 class='card-title mt-1'>" + title + "</h1>"
                    + "<div class='row'>"
                      + "<div class='col-4'>"
                        + "<div class ='row'>"
                          + "<div class='col-2'>"
                            + "<span class='material-symbols-outlined icon-size-25 text-secondary'> visibility </span>"
                          + "</div>"
                          + "<div class='col'> --- </div>"
                        + "</div>"
                        + "<div class ='row'>"
                        + "<div class='col-2'>"
                          +  "<span class='material-symbols-outlined icon-size-25 text-secondary'> edit_calendar </span>"
                          + "</div>"
                          + "<div class='col'>" + date + "</div>"
                        + "</div>"
                        + "<div class ='row'>"
                          + "<div class='col-2'> <span class='material-symbols-outlined icon-size-25 text-secondary'> feed </span> </div>"
                          + "<div class='col'> 1 </div>"
                        + "</div>"
                      + "</div>"
                      + "<div class='col'>"
                        + "<div class='row'>"
                          + "<div class='col-1'>"
                            + "<span class='material-symbols-outlined icon-size-35 text-secondary'> sell </span>"
                          + "</div>"
                          + "<div class='col'></div>"
                        + "</div>"
                      + "</div>"
                    + "</div>"

                + "</div>"
            + "</div>"
            + "<div id='collapse" + card_num_str + "'class='collapse bg-secondary' data-bs-parent='#accordion'>"
                + "<div class='card-body'>"
                + "<p class='text-light'> <a href='" + url + "'class='text-light'  target='_blank'>" + source_name + ":</a>" + title + "</p>"
                + "</div>"
            + "</div>"
          + "</div>";
          $("#accordion").append(new_card)
          }

          /*for(var i = -1; i < 9; i++) {
            card_num = i+2
            card_num_str = String(card_num)
            collapse_str_id = "#collapse" + card_num_str
            $(collapse_str_id).click(function(){ //maybe I should do this for all of the cards?
              // source: https://stackoverflow.com/questions/19719035/get-a-number-inside-a-div-and-count-plus-one
              var value = parseInt($(".view-counter").text(), 10) + 1;
              $(".view-counter").text(value);
            });*/

            $("#collapse1").click(function(){ //maybe I should do this for all of the cards?
              // source: https://stackoverflow.com/questions/19719035/get-a-number-inside-a-div-and-count-plus-one
              var value = parseInt($(".view-counter").text(), 10) + 1;
              $(".view-counter").text(value);
            });

        }, "json" );

    </script>
</body>
</html>
